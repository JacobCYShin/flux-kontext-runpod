# Flux Kontext λ΅μ»¬ ν…μ¤νΈ κ°€μ΄λ“

μ΄ κ°€μ΄λ“λ” λ„μ»¤ λΉλ“ ν›„ λ΅μ»¬ PCμ—μ„ Flux Kontextλ¥Ό ν…μ¤νΈν•λ” λ°©λ²•μ„ μ„¤λ…ν•©λ‹λ‹¤.

## π“‹ μ‚¬μ „ μ”κµ¬μ‚¬ν•­

- **GPU**: CUDA μ§€μ› GPU (μµμ† 8GB VRAM κ¶μ¥)
- **Python**: 3.8 μ΄μƒ
- **PyTorch**: CUDA μ§€μ› λ²„μ „
- **ν•„μ”ν• λΌμ΄λΈλ¬λ¦¬λ“¤**: diffusers, nunchaku, PIL λ“±

## π€ ν…μ¤νΈ λ°©λ²•

### 1. CLI λ°©μ‹ (local_test.py)

λ…λ Ήμ¤„μ—μ„ μ§μ ‘ νλΌλ―Έν„°λ¥Ό μ§€μ •ν•μ—¬ ν…μ¤νΈν•  μ μμµλ‹λ‹¤.

```bash
# κΈ°λ³Έ μ‚¬μ©λ²•
python local_test.py <μ΄λ―Έμ§€νμΌ> "<ν”„λ΅¬ν”„νΈ>" <λΉ„μ¨>

# μμ‹
python local_test.py my_image.jpg "make it a watercolor painting" "1:1"
python local_test.py photo.png "add snow" "16:9" --output result.png
```

**νλΌλ―Έν„° μ„¤λ…:**
- `μ΄λ―Έμ§€νμΌ`: μ²λ¦¬ν•  μ΄λ―Έμ§€ νμΌ κ²½λ΅
- `ν”„λ΅¬ν”„νΈ`: μ΄λ―Έμ§€ λ³€ν™μ„ μ„ν• ν…μ¤νΈ μ„¤λ…
- `λΉ„μ¨`: μ¶λ ¥ μ΄λ―Έμ§€ λΉ„μ¨ (μ: "1:1", "16:9", "original")
- `--output`: μ¶λ ¥ νμΌ κ²½λ΅ (μ„ νƒμ‚¬ν•­, κΈ°λ³Έκ°’: output.png)

### 2. λ€ν™”ν• λ°©μ‹ (interactive_test.py)

λ€ν™”ν•μΌλ΅ μ…λ ¥μ„ λ°›μ•„ ν…μ¤νΈν•  μ μμµλ‹λ‹¤.

```bash
python interactive_test.py
```

μ‹¤ν–‰ν•λ©΄ λ‹¤μ μμ„λ΅ μ…λ ¥μ„ λ°›μµλ‹λ‹¤:
1. μ΄λ―Έμ§€ νμΌ κ²½λ΅
2. λ³€ν™ ν”„λ΅¬ν”„νΈ
3. λΉ„μ¨ μ„ νƒ (1-5λ² λ©”λ‰΄)
4. μ¶λ ¥ νμΌλ…

## π“ μ§€μ›ν•λ” λΉ„μ¨

- `1:1`: μ •μ‚¬κ°ν•
- `16:9`: κ°€λ΅ν• (μ™€μ΄λ“μ¤ν¬λ¦°)
- `9:16`: μ„Έλ΅ν• (λ¨λ°”μΌ)
- `4:3`: μ „ν†µμ  λΉ„μ¨
- `original`: μ›λ³Έ μ΄λ―Έμ§€ λΉ„μ¨ μ μ§€

## π”§ λ¬Έμ  ν•΄κ²°

### CUDA μ¤λ¥
```
β CUDAκ°€ μ‚¬μ© λ¶κ°€λ¥ν•©λ‹λ‹¤. GPUκ°€ ν•„μ”ν•©λ‹λ‹¤.
```
- NVIDIA GPUκ°€ μ„¤μΉλμ–΄ μλ”μ§€ ν™•μΈ
- CUDA λ“λΌμ΄λ²„κ°€ μ„¤μΉλμ–΄ μλ”μ§€ ν™•μΈ
- PyTorch CUDA λ²„μ „μ΄ μ„¤μΉλμ–΄ μλ”μ§€ ν™•μΈ

### λ¨λΈ λ΅λ”© μ¤λ¥
```
β λ¨λΈ λ΅λ”© μ‹¤ν¨: ...
```
- μΈν„°λ„· μ—°κ²° ν™•μΈ
- μ¶©λ¶„ν• λ””μ¤ν¬ κ³µκ°„ ν™•μΈ (λ¨λΈ λ‹¤μ΄λ΅λ“ ν•„μ”)
- GPU λ©”λ¨λ¦¬ λ¶€μ΅± μ‹ λ‹¤λ¥Έ ν”„λ΅κ·Έλ¨ μΆ…λ£

### λ©”λ¨λ¦¬ λ¶€μ΅± μ¤λ¥
- GPU λ©”λ¨λ¦¬κ°€ λ¶€μ΅±ν• κ²½μ° λ” μ‘μ€ μ΄λ―Έμ§€ μ‚¬μ©
- λ‹¤λ¥Έ GPU ν”„λ΅κ·Έλ¨ μΆ…λ£
- μ‹μ¤ν… μ¬λ¶€ν… ν›„ μ¬μ‹λ„

## π“ νμΌ κµ¬μ΅°

```
flux-kontext-runpod/
β”β”€β”€ main.py              # RunPod μ„λ²„λ¦¬μ¤μ© (μμ •ν•μ§€ μ•μ)
β”β”€β”€ local_test.py        # CLI ν…μ¤νΈμ© (μƒλ΅ μƒμ„±)
β”β”€β”€ interactive_test.py  # λ€ν™”ν• ν…μ¤νΈμ© (μƒλ΅ μƒμ„±)
β”β”€β”€ utils.py             # κ³µν†µ μ ν‹Έλ¦¬ν‹° ν•¨μλ“¤
β””β”€β”€ gradio_app/          # μ›Ή μΈν„°νμ΄μ¤ (κΈ°μ΅΄)
    β”β”€β”€ app.py
    β”β”€β”€ inference.py
    β””β”€β”€ ...
```

## π’΅ μ‚¬μ© ν

1. **μ²« μ‹¤ν–‰ μ‹**: λ¨λΈ λ‹¤μ΄λ΅λ“λ΅ μΈν•΄ μ‹κ°„μ΄ μ¤λ κ±Έλ¦΄ μ μμµλ‹λ‹¤
2. **ν”„λ΅¬ν”„νΈ μ‘μ„±**: κµ¬μ²΄μ μ΄κ³  λ…ν™•ν• μ„¤λ…μ΄ μΆ‹μ€ κ²°κ³Όλ¥Ό λ§λ“­λ‹λ‹¤
3. **μ΄λ―Έμ§€ ν¬κΈ°**: λ„λ¬΄ ν° μ΄λ―Έμ§€λ” μ²λ¦¬ μ‹κ°„μ΄ μ¤λ κ±Έλ¦½λ‹λ‹¤
4. **μ§„ν–‰ μƒν™©**: 5λ‹¨κ³„λ§λ‹¤ μ§„ν–‰λ¥ μ΄ μ¶λ ¥λ©λ‹λ‹¤

## π― μμ‹ ν”„λ΅¬ν”„νΈ

- "make it a watercolor painting"
- "add snow and winter atmosphere"
- "convert to anime style"
- "make it look like a vintage photograph"
- "add magical sparkles and glow effects"

## β οΈ μ£Όμμ‚¬ν•­

- κΈ°μ΅΄ `main.py`λ” μμ •ν•μ§€ λ§μ„Έμ” (RunPodμ©)
- GPU λ©”λ¨λ¦¬ μ‚¬μ©λ‰μ„ λ¨λ‹ν„°λ§ν•μ„Έμ”
- μƒμ„±λ μ΄λ―Έμ§€λ” λ΅μ»¬μ— μ €μ¥λ©λ‹λ‹¤
- μΈν„°λ„· μ—°κ²°μ΄ ν•„μ”ν•©λ‹λ‹¤ (λ¨λΈ λ‹¤μ΄λ΅λ“μ©) 